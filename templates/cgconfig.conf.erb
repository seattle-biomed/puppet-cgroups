#
# This file is managed by puppet class <%= @name %>
#

mount {
<% @config_mounts.sort.each do |key,value| -%>
  <%= key %> = <%= value %>
<% end -%>
}

<% @options.sort.map do |k,v| -%>
<%= k %> {
<%   v.sort.map do |ki, vi| -%>
<%     if vi.is_a?(Hash) -%>
  <%=    ki %> {
<%       vi.sort.map do |kx, vx| -%>
<%         if vx != :undef -%>
    <%=      kx %> = "<%= vx %>";
<%         end -%>
<%       end -%>
  }
<%     end -%>
<%     elsif vi != :undef -%>
<%=      ki %> = "<%= vi %>";
<%     end -%>
<%   end -%>
}
<% end -%>
